<?xml version="1.0"?>
<cd:ProductDefinition xmlns:cd="http://www.stcorp.nl/coda/definition/2008/07" xmlns:ct="http://www.stcorp.nl/coda/test/2008/10" id="CPR_NOM_0_" format="binary" last-modified="2020-02-25">
  <cd:Array>
    <cd:Dimension><![CDATA[$num_dsr]]></cd:Dimension>
    <cd:Record format="binary">
      <cd:Description>Annotated Instrument Source Packet</cd:Description>
      <cd:Field name="ISP_annotation_header">
        <cd:NamedType id="ISP_annotation_header"/>
      </cd:Field>
      <cd:Field name="ISP">
        <cd:Record format="binary">
          <cd:Description>Instrument Source Packet</cd:Description>
          <cd:Field name="packet_header">
            <cd:NamedType id="ISP_packet_header"/>
          </cd:Field>
          <cd:Field name="data_field_header">
            <cd:NamedType id="ISP_data_field_header"/>
          </cd:Field>
          <cd:Field name="data_field">
             <cd:Record format="binary">
               <cd:Field name="SC_state_vector_quality">
                 <cd:Integer>
                   <cd:Description>S/C State Vector Quality</cd:Description>
                   <cd:BitSize>32</cd:BitSize>
                   <cd:NativeType>uint32</cd:NativeType>
                 </cd:Integer>
               </cd:Field>
               <cd:Field name="ISP_format_version">
                 <cd:Integer>
                   <cd:Description>ISP Format Version</cd:Description>
                   <cd:BitSize>16</cd:BitSize>
                   <cd:NativeType>uint16</cd:NativeType>
                 </cd:Integer>
               </cd:Field>
               <cd:Field name="CPR_offset_time">
                 <cd:Integer>
                   <cd:Description>CPR Offset Time</cd:Description>
                   <cd:BitSize>32</cd:BitSize>
                   <cd:NativeType>uint32</cd:NativeType>
                 </cd:Integer>
               </cd:Field>
               <cd:Field name="data">
                 <cd:Union format="binary">
                   <cd:FieldExpression><![CDATA[if(int(../../../data_field_header/service_subtype) == 1, 0, 1)]]></cd:FieldExpression>


                   <cd:Field name="status_data">
                     <cd:Record format="binary">
                       <cd:Field name="EC_coarse_time">
                         <cd:Integer>
                           <cd:Description>EC Coarse Time</cd:Description>
                           <cd:BitSize>32</cd:BitSize>
                           <cd:NativeType>uint32</cd:NativeType>
                         </cd:Integer>
                       </cd:Field>

                       <cd:Field name="CPR_fine_time">
                         <cd:Integer>
                           <cd:Description>CPR Fine Time</cd:Description>
                           <cd:BitSize>32</cd:BitSize>
                           <cd:NativeType>uint32</cd:NativeType>
                         </cd:Integer>
                       </cd:Field>

                       <cd:Field name="CPR_offset_time">
                         <cd:Integer>
                           <cd:Description>CPR Offset Time</cd:Description>
                           <cd:BitSize>32</cd:BitSize>
                           <cd:NativeType>uint32</cd:NativeType>
                         </cd:Integer>
                       </cd:Field>

                       <cd:Field name="operational_mode">
                         <cd:Integer>
                           <cd:Description>Operational Mode</cd:Description>
                           <cd:BitSize>4</cd:BitSize>
                           <cd:NativeType>uint8</cd:NativeType>
                         </cd:Integer>
                       </cd:Field>

                       <cd:Field name="obs_sub_mode">
                         <cd:Integer>
                           <cd:Description>Obs Sub Mode</cd:Description>
                           <cd:BitSize>3</cd:BitSize>
                           <cd:NativeType>uint8</cd:NativeType>
                         </cd:Integer>
                       </cd:Field>

                       <cd:Field name="transition_status">
                         <cd:Integer>
                           <cd:Description>Transition Status</cd:Description>
                           <cd:BitSize>1</cd:BitSize>
                           <cd:NativeType>uint8</cd:NativeType>
                         </cd:Integer>
                       </cd:Field>

                       <cd:Field name="SC_state_vector_quality">
                         <cd:Integer>
                           <cd:Description>S/C State Vector Quality</cd:Description>
                           <cd:BitSize>32</cd:BitSize>
                           <cd:NativeType>uint32</cd:NativeType>
                         </cd:Integer>
                       </cd:Field>

                       <cd:Field name="coarse_time">
                         <cd:Integer>
                           <cd:Description>Coarse satellite orbital time (local)</cd:Description>
                           <cd:BitSize>32</cd:BitSize>
                           <cd:NativeType>uint32</cd:NativeType>
                         </cd:Integer>
                       </cd:Field>

                       <cd:Field name="spare">
                         <cd:Integer>
                           <cd:Description>Spare</cd:Description>
                           <cd:BitSize>8</cd:BitSize>
                           <cd:NativeType>uint8</cd:NativeType>
                         </cd:Integer>
                         <cd:Hidden/>
                       </cd:Field>

                       <cd:Field name="fine_time">
                         <cd:Integer>
                           <cd:Description>Fine satellite orbital time (local)</cd:Description>
                           <cd:BitSize>24</cd:BitSize>
                           <cd:NativeType>uint32</cd:NativeType>
                         </cd:Integer>
                       </cd:Field>

                       <cd:Field name="pos_X">
                         <cd:Integer>
                           <cd:Description>Position X</cd:Description>
                           <cd:BitSize>32</cd:BitSize>
                           <cd:NativeType>uint32</cd:NativeType>
                         </cd:Integer>
                       </cd:Field>

                       <cd:Field name="pos_Y">
                         <cd:Integer>
                           <cd:Description>Position Y</cd:Description>
                           <cd:BitSize>32</cd:BitSize>
                           <cd:NativeType>uint32</cd:NativeType>
                         </cd:Integer>
                       </cd:Field>

                       <cd:Field name="pos_Z">
                         <cd:Integer>
                           <cd:Description>Position Z</cd:Description>
                           <cd:BitSize>32</cd:BitSize>
                           <cd:NativeType>uint32</cd:NativeType>
                         </cd:Integer>
                       </cd:Field>

                       <cd:Field name="velocity_X">
                         <cd:Integer>
                           <cd:Description>Velocity X</cd:Description>
                           <cd:BitSize>32</cd:BitSize>
                           <cd:NativeType>uint32</cd:NativeType>
                         </cd:Integer>
                       </cd:Field>

                       <cd:Field name="velocity_Y">
                         <cd:Integer>
                           <cd:Description>Velocity Y</cd:Description>
                           <cd:BitSize>32</cd:BitSize>
                           <cd:NativeType>uint32</cd:NativeType>
                         </cd:Integer>
                       </cd:Field>

                       <cd:Field name="velocity_Z">
                         <cd:Integer>
                           <cd:Description>Velocity Z</cd:Description>
                           <cd:BitSize>32</cd:BitSize>
                           <cd:NativeType>uint32</cd:NativeType>
                         </cd:Integer>
                       </cd:Field>

                       <cd:Field name="geodetic_altitude">
                         <cd:Integer>
                           <cd:Description>Geodetic Altitude</cd:Description>
                           <cd:BitSize>32</cd:BitSize>
                           <cd:NativeType>uint32</cd:NativeType>
                         </cd:Integer>
                       </cd:Field>

                       <cd:Field name="geodetic_latitude_argument">
                         <cd:Integer>
                           <cd:Description>Geodetic Argument of Latitude</cd:Description>
                           <cd:BitSize>32</cd:BitSize>
                           <cd:NativeType>uint32</cd:NativeType>
                         </cd:Integer>
                       </cd:Field>

                       <cd:Field name="geocentric_latitude">
                         <cd:Integer>
                           <cd:Description>Geocentric Latitude</cd:Description>
                           <cd:BitSize>32</cd:BitSize>
                           <cd:NativeType>uint32</cd:NativeType>
                         </cd:Integer>
                       </cd:Field>


          <cd:Field name="blabla">
              <cd:Raw>
                <cd:BitSize><![CDATA[(235 + 1 - 12 - 10 - 4 - 21 - 24 - 12) * 8]]></cd:BitSize>
              </cd:Raw>
          </cd:Field>

                     </cd:Record>
                   </cd:Field>

                   <cd:Field name="data">
                     <cd:Record format="binary">
                       <cd:Field name="frame_number">
                         <cd:Integer>
                           <cd:Description>Frame number</cd:Description>
                           <cd:BitSize>32</cd:BitSize>
                           <cd:NativeType>uint32</cd:NativeType>
                         </cd:Integer>
                       </cd:Field>

          <cd:Field name="blabla">
              <cd:Raw>
                <cd:BitSize><![CDATA[(2363 + 1 - 12 - 10 - 4) * 8]]></cd:BitSize>
              </cd:Raw>
          </cd:Field>

                     </cd:Record>
                   </cd:Field>

                 </cd:Union>
               </cd:Field>



            </cd:Record>
          </cd:Field>
        </cd:Record>
      </cd:Field>
    </cd:Record>
  </cd:Array>
  <cd:ProductVariable name="num_dsr">
    <cd:Init><![CDATA[$num_dsr = unboundindex(/, byteoffset(.) >= filesize())]]></cd:Init>
  </cd:ProductVariable>
</cd:ProductDefinition>
